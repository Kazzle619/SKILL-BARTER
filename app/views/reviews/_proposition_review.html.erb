<%# 交換を完了しているか否かで表示する内容を変更 %>

<div class="card h-100" style="background-color: rgba(153, 102, 255, 0.4);">
  <div class="card-body p-3">

    <% if proposition.is_reviewed? %>

      <%# レビュー編集ボタン。レビューしたユーザーにのみ表示。 %>
      <% if review.user == current_user %>
        <div class="card-text text-right">
          <%= link_to "編集する", edit_proposition_review_path(proposition.id, review.id), class: "btn btn-outline-primary btn-block" %>
        </div>
      <% end %>

      <%# レビューしたユーザーのプロフィール画像と氏名 %>
      <div class="card-title">
        <%= attachment_image_tag review.user, :profile_image, format: 'jpeg', fallback: "no_image_user.jpeg", size: "50x50", class: "rounded-circle" %>
        <%= review.user.name %>
      </div>

      <%# レビューレート。後程変更予定。 %>
      <div class="card-text">
        <%= "レビューレート" %>
      </div>

      <%# レビュー内容 %>
      <div class="card-text d-flex align-items-center text-wrap">
        <%= review.comment %>
      </div>

    <%# マッチングしているユーザーで、レビュー前の場合。スキル交換完了申請ボタンを表示 %>
    <% elsif proposition.matched_with? %>
      <div class="card-title d-flex align-items-center text-wrap">
        スキル交換を完了後はレビュー作成ページへ移動します。<br >
        レビューを作成すると、ここにレビュー内容が表示されます。
      </div>
      <div class="card-text d-flex align-items-center">
        <%= link_to "スキル交換を完了する", new_proposition_review_path(proposition.id), "data-confirm" => "この操作は取り消せません。\nスキル交換を完了してよろしいですか？", class: "btn btn-info btn-block" %>
      </div>

    <%# マッチングしていない、またはマッチングしたユーザーでない場合。 %>
    <% else %>
      <div class="card-text d-flex align-items-center text-wrap">
      レビューが作成されると、ここにレビュー内容が表示されます。
      </div>

    <% end %>
  </div>
</div>
